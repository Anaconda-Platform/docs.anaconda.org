---
title: Conda Packaging
subtitle: ''

sub_items:
 - id: conda-installing
   title: Installing Conda packages
 - id: conda-authoring
   title: Authoring Conda packages

---
{% from "macros.html" import section, subsection %}
{% extends "layout.html" %}

{% block main %}
{% call section('conda-installing') %}

## Installing Conda packages

The basic way to install a package from [binstar.org](https://binstar.org/) is using `conda`:

```
$ conda install --channel https://conda.binstar.org/REPOSITORY-PATH PACKAGE
```

Where **REPOSITORY-PATH** may be one of the following:

1. A **username**, this allows installation of packages from a user repository:
    ```
    $ conda install --channel https://conda.binstar.org/USERNAME PACKAGE
    ```

1.  A **user channel**, this allows installation of packages from a collection of packages a user has put together:
    ```
    $ conda install --channel https://conda.binstar.org/USERNAME/channel/CHANNELNAME PACKAGE
    ```

    The **main** channel is the default channel, so:

    `https://conda.binstar.org/USERNAME/channel/main` is equivalent to `https://conda.binstar.org/USERNAME`.

## Installing Private Packages

All urls can be prefixed with `/t/$TOKEN` to access private packages.

    $ TOKEN=$(binstar auth --create --name YOUR-TOKEN-NAME)
    $ conda install --channel https://conda.binstar.org/t/$TOKEN/USERNAME PACKAGE

### Modify your conda RC file

Conda allows you to set all command line option defaults in standard yaml style file.

The names and locations of the configuration files vary slightly across platforms.

 * On Unix and Mac OS X the configuration file is: `$HOME/.condarc`
 * On Windows, the configuration file is: `%HOME%\condarc`

Appending options like `--channel https://conda.binstar.org/USERNAME` can be written as:


    channels:
        - defaults
        - https://conda.binstar.org/USERNAME

See also the [customization of .condarc file section](http://conda.pydata.org/docs/faq.html#customization).

{% endcall %}
{% call section('conda-authoring') %}

## Authoring Conda packages

Before proceed you have to install mandatory toolset:

    $ conda install conda-build


The next step is to choose a repository you would like to built package for.
For the purposes of this example, we'll use the [ggplot](https://github.com/yhat/ggplot.git).

Therefore:


    $ cd ~/
    $ mkdir ggplot-recipe
    $ cd ggplot-recipe/


Inside, create a file called **meta.yaml** that has this information:


    package:
      name: ggplot
      version: "0.5.9"

    source:
      git_url: https://github.com/yhat/ggplot.git

    requirements:
      build:
        - python
        - setuptools
        - six
        - pandas
        - numpy
        - matplotlib
        - statsmodels
        - brewer2mpl
        - patsy
        - scipy

      run:
        - matplotlib
        - statsmodels
        - scipy
        - patsy
        - brewer2mpl
        - python
        - six
        - pandas
        - numpy

    test:
      # Python imports
      imports:
        - ggplot

    about:
      home: https://github.com/yhat/ggplot
      license: https://github.com/yhat/ggplot/blob/master/LICENSE

**Note**:

For more information on *meta.yaml* package files and overall conda's build framework,
please reference the [conda build documentation](http://conda.pydata.org/docs/build.html).


Next you need **build.sh** in this same directory with below content (this is for Linux and Mac):


    #!/bin/bash

    ${PYTHON} setup.py install || exit 1

    # Add more build steps here, if they are necessary.

    # See
    # http://docs.continuum.io/conda/build.html
    # for a list of environment variables that are set during the build process.


And a **build.bat** with content (this is for Windows):


    "%PYTHON%" setup.py install
    if errorlevel 1 exit 1

    :: Add more build steps here, if they are necessary.

    :: See
    :: http://docs.continuum.io/conda/build.html
    :: for a list of environment variables that are set during the build process.


At this time we are ready to build our package, to do so we need to type:


    $ cd ../
    $ conda build ggplot-recipe/


You may see this message after the package is successfully built:

    # If you want to upload this package to binstar.org later, type:
    #
    # $ binstar upload /home/irritum/anaconda/conda-bld/linux-64/ggplot-0.6.5-np18py27_0.tar.bz2
    #
    # To have conda build upload to binstar automatically, use
    # $ conda config --set binstar_upload yes

All packages built in this way are placed in a subdirectory of [Anaconda's](https://store.continuum.io/cshop/anaconda/) *conda-bld* directory.
You can check of your root directory installation by typing:


    $ conda info

If you do not choose to set `binstar_upload` to `yes` by default, you may now upload your package manually:


    $ binstar -t ${TOKEN} upload /home/irritum/anaconda/conda-bld/linux64/ggplot-0.6.5-np18py27_0.tar.bz2

    Using binstar api site http://api.binstar.org
    detecting package type ...
    conda
    extracting package attributes for upload ...
    done

    Uploading file /home/irritum/anaconda/conda-bld/linux-64/ggplot/0.6.5/osx-64/ggplot-0.6.5-np18py27_0.tar.bz2 ... 
     uploaded 6712 of 6712Kb: 100.00% ETA: 0.0 minutes


    Upload(s) Complete

    Package located at:
    http://binstar.org/irritum/ggplot

Your package is now available at *http://binstar.org/USERNAME/ggplot*.

**Note**:

Please consider sharing with your own conda recipes with community and make a pull request
to official [conda-recipes repository](https://github.com/conda/conda-recipes).


So now, if You would like to install just uploaded package, please run:


    $ conda install --channel https://conda.binstar.org/USERNAME ggplot

See also [authoring packages](author.html) for a general overview.

{% endcall %}

{%endblock%}
